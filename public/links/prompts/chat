#chat?e&w&p=TASK: output HTML wireframe for a chatbot
  - components:
    - header
      - model details
        - model name
        - model host
        - apikey (type=password)
    - messages area (no placeholders)
    - footer
      - resizable textarea
      - submit
  - css: use flex so that the messages area fits the space between the header and footer
  - no javascript
  - dont include html/head/body tags just the wireframe
&w&a=1&p=TASK: output a SCRIPT tag that populates the header details
  - read the value of localStorage.getItem('m') and store it in the model name field
  - do same for localStorage.getItem('h')
  - and localStorage.getItem('k')
  - do no
&w&a=1&c=src&p=TASK: output a SCRIPT tag that handles the actual chat
  - the attached CONTEXT gives you clues on how to handle chat
    - there a special case for "google"
  - reimplement but with streaming use streaming mode
    - for "google" the endpoint would be :streamGenerateContent
    - for any other host, set stream to true
  - create a hook system so that we can add context transformers just before the prompt is sent to the ai
    - just use a global chatPlugins = {pluginName: {callback: function (currentPrompt, fullChat) {returns transformedText}}}
    - create a plugin that console.logs the text before it's sent
  - send the full chat + the users prompt as a single string (no need to send array of messages)
  - send when user presses either CTRL+ENTER inside the textarea OR when they press submit button
  - textarea is cleared upon submit
  - textarea is resizable
  - do not autoscroll the page
&w&a=1&p=TASK: output a SCRIPT tag to add a new context transformer plugin
  - window.DB is a global that contains the database table name
  - look for `[[link]]` in the current prompt
    - [[links]] can be in form table#record assume the following
      - [[link]] === [[${DB}#link]]; name === ${DB}
      - [[#link]] === [[${DB}#link]]; name === ${DB}
      - [[some#link]] === [[some#link]]; name === some
    - use `read(link, name).then(context=>{})` to replace the [[link]] with the context
      - wrap the context with "<context file="some#link">...data...</context>
    - console.log the link and the context for debugging
  - return the transformed context
  - only extract [[links]] in the current PROMPT not the whole chat
  - try...catch it, often the links wont exist yet; silently quiet those errors
  - be mindful of how you handle promises
&w